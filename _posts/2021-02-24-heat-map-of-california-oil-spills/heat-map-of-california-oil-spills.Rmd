---
title: "Heat Map of California Oil Spills"
description: |
  I determined the counties with the most oil spills using the California Department of Fish and Wildlife 2008 Oil Spill Incident Tracking and county maps from the Census Bureau.
code_folding: hide
output:
  distill::distill_article:
    code_folding: true
    self_contained: false
---


```{r setup}
knitr::opts_chunk$set(echo = FALSE)
#set up
library(tidyverse)
library(here)
library(sf)
library(janitor)
library(lubridate)


#read in .shp file
ca_counties <- read_sf(here( "_posts","2021-02-24-heat-map-of-california-oil-spills", "data","ca_counties", "CA_Counties_TIGER2016.shp"))
ca_subset <- ca_counties %>% 
  select(NAME, ALAND) %>% 
  rename(county_name = NAME, land_area = ALAND)
ca_oilspill <- read_sf(here("_posts","2021-02-24-heat-map-of-california-oil-spills", "data", "ds394.shp")) %>% 
  clean_names()

#Check CRS and plot info
#ca_subset %>% st_crs()
#ca_oilspill %>%  st_crs()

#change ca_oilspill to WGS 84
ca_oilspill <-  st_transform(ca_oilspill, 3857)

#join county and oilspill data to one
ca_county_oilspill <- ca_subset %>% 
  st_join(ca_oilspill)
```

```{r,  warning = FALSE, message = FALSE}
#counts data 
oilspill_counts <- ca_county_oilspill %>% 
  count(county_name)
#map it! But is not interactive map 
ggplot(data = oilspill_counts) +
  geom_sf(aes(fill = n), color = "white", size = 0.1) +
  scale_fill_gradientn(colors = c("lightgray", "blue", "navy"))+
  theme_minimal() +
  labs(fill = "Number of oil spill incidents", title = "2008 California Oil Spill County Heat Map") 
```


## Summary: 

This project was my first introduction to R's geospatial capabilities. 2008 oil spill data from the California Department of Fish and Wildlife was mapped onto county outlines provided by the US Census Bureau. The coordinate reference system for both was WGS 84. Using the data provided and the package "sf", I found the counties with the most incidents in California and visualized it. It was a great learning experience to get data from different sources and visualize it on my own. 

## Citations: 

California Department of Fish and Wildlife. (2009). Oil Spill Incident Tracking [ds394]. OSPR Incident Tracking Database System. [https://map.dfg.ca.gov/metadata/ds0394.html#ID0EUGA](https://map.dfg.ca.gov/metadata/ds0394.html#ID0EUGA)

US Census Bureau, Department of Commerce. (2016). TIGER/Line Shapefile, 2016, state, California, Current County Subdivision State-based. Data.gov. [https://catalog.data.gov/dataset/tiger-line-shapefile-2016-state-california-current-county-subdivision-state-based](https://catalog.data.gov/dataset/tiger-line-shapefile-2016-state-california-current-county-subdivision-state-based)


